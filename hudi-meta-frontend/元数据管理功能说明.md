# 元数据管理功能说明

## 功能概述

在Hudi Meta Table管理系统中新增了《元数据管理》功能，用于展示和管理当前Hudi系统的所有元数据表。该功能位于左侧菜单栏的《表管理》菜单下方。

## 功能特性

### 1. 系统表展示
- 显示所有Hudi系统元数据表的详细信息
- 包含表名、类型、状态、记录数、大小、位置等信息
- 支持表格排序和数据刷新

### 2. 统计信息
- 总表数统计
- 存在表数量统计
- 缺失表数量统计
- 总记录数统计

### 3. 表类型分类
- **METADATA**：存储表的元数据信息
- **SYSTEM**：存储系统级别的配置和状态
- **TIMELINE**：记录表的时间线和版本信息
- **COMPACTION**：管理压缩操作的相关信息
- **CLEANER**：管理清理操作的相关信息

### 4. 操作功能
- 查看详情：查看单个系统表的详细信息
- 刷新：刷新单个表或所有表的状态信息

## 系统表说明

### 核心元数据表

1. **meta_hudi_table**
   - 存储Hudi表的元数据信息，包括表结构、分区、配置等
   - 记录所有已创建的Hudi表的基本信息

2. **meta_hudi_timeline**
   - 存储Hudi表的时间线信息，记录所有提交、回滚等操作
   - 用于版本控制和历史操作追踪

3. **meta_hudi_partition**
   - 存储Hudi表的分区信息
   - 管理表的分区结构和分区值

4. **meta_hudi_schema**
   - 存储Hudi表的Schema版本信息
   - 支持Schema演进和版本管理

### 系统管理表

5. **meta_hudi_index**
   - 存储Hudi表的索引信息
   - 管理表的索引结构和状态

6. **meta_hudi_locks**
   - 管理Hudi表的锁信息，用于并发控制
   - 确保多写入场景下的数据一致性

7. **meta_hudi_metadata_table**
   - 元数据表的元数据信息
   - 用于系统自身的元数据管理

### 操作管理表

8. **meta_hudi_compaction**
   - 管理Hudi表的压缩操作信息
   - 记录压缩任务的状态和进度

9. **meta_hudi_cleaner**
   - 管理Hudi表的清理操作信息
   - 记录清理任务的执行情况

10. **meta_hudi_bootstrap**
    - 存储Hudi表的引导信息
    - 用于表的初始化和引导操作

## 技术实现

### 前端实现
- 位置：`src/pages/MetadataManagement/index.tsx`
- 使用React + TypeScript + Ant Design
- 支持响应式设计和深色主题

### API接口
- `GET /api/meta/tables/system-tables` - 获取系统表列表
- `GET /api/meta/tables/system-tables/stats` - 获取统计信息
- `POST /api/meta/tables/system-tables/{tableName}/refresh` - 刷新表信息

### 数据模拟
- 当前使用模拟数据进行展示
- 模拟数据位置：`src/services/mockData.ts`
- 后续可以替换为真实的API调用

## 使用方法

1. 启动前端应用后，点击左侧菜单的《元数据管理》
2. 查看系统表列表和统计信息
3. 使用刷新按钮更新表状态
4. 点击查看详情按钮查看单个表的详细信息

## 扩展功能

### 计划中的功能
1. 系统表详情查看模态框
2. 系统表健康检查和修复
3. 系统表备份和恢复
4. 系统表性能监控
5. 系统表操作日志

### 配置选项
- 表刷新间隔设置
- 表状态告警配置
- 表大小监控阈值
- 表记录数监控阈值

## 注意事项

1. 系统表是Hudi的核心组件，请谨慎进行操作
2. 定期检查系统表的状态和完整性
3. 在生产环境中，建议定期备份系统表
4. 系统表的异常可能会影响整个Hudi系统的正常运行

## 故障排除

### 常见问题
1. **系统表显示"不存在"**
   - 检查Hudi系统是否正确初始化
   - 确认元数据存储路径是否正确

2. **刷新功能不工作**
   - 检查后端API服务是否正常运行
   - 确认网络连接是否正常

3. **统计信息不准确**
   - 尝试刷新页面或重新加载数据
   - 检查系统表的同步状态

### 支持联系
如果在使用过程中遇到问题，请联系系统管理员或查看详细的错误日志。 